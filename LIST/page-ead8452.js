const _Page={props:['a','url','url2'],setup(ps){const t=reactive({gop:null,});const pg=computed(()=>{const a=ps.a,c=a.curr,p=a.pages,s=a.set,o={z:0,x:0,h:0,};o.h=Math.ceil(s/2);if(c>p)a.curr=p;if(c<1)a.curr=1;if(p<=s+2){o.x=0;o.z=p}else if(c<=o.h+1){o.x=0;o.z=s+1}else if(c>p-o.h){o.x=p-s;o.z=s}else if(c>p-o.h-1){o.x=p-s-1;o.z=s+1}else{o.x=c-o.h;o.z=s}
return o});_fun.go=(n)=>{n=Number(n);if(n>0&&n!=ps.a.curr){ps.a.curr=n;fun_.ajax()}};_fun.re=(n)=>{n=Number(n);if(n>0){ps.a.curr=n;fun_.ajax()}};const fun_={};fun_.ajax=()=>{window.scrollTo(0,0);_fun.setload(1);if(_obj.req)_obj.req.abort();_obj.req=new AbortController();_BT.req.url('/res'+ps.url+ps.a.curr+(ps.url2||'')).signal(_obj.req).get().json((data)=>{data.page.curr=ps.a.curr;_fun.setlist(data.inlist,data.footer);window.history.pushState(JSON.parse(JSON.stringify(_obj)),'',ps.url+ps.a.curr+(ps.url2||''))}).catch((e)=>{if(e.message&&!e.message.includes('abort')){_BT.msg('❌网络错误',8000)}}).finally(()=>{_fun.setload(0)})};return()=>ps.a.pages>1?h('div',{class:'pages',},[ps.a.curr>1?h('a',{onClick:()=>_fun.go(ps.a.curr-1),},'上一页'):'',ps.a.curr>pg.value.h+1&&ps.a.pages>ps.a.set+2?h('a',{onClick:()=>_fun.go(1),},'1..'):'',Array.from({length:pg.value.z}).map((v,n)=>{n+=1;return[ps.a.curr==pg.value.x+n?h('span',pg.value.x+n):h('a',{onClick:()=>_fun.go(pg.value.x+n),},pg.value.x+n),]}),ps.a.pages>ps.a.set+2&&ps.a.pages>=ps.a.curr+pg.value.h+1?h('a',{onClick:()=>_fun.go(ps.a.pages),},'..'+ps.a.pages):'',ps.a.curr<ps.a.pages?h('a',{onClick:()=>_fun.go(ps.a.curr+1),},'下一页'):'',ps.a.pages>ps.a.set?[h('input',{type:'text',name:'custompage',class:'px',placeholder:'输入页码',size:'3',title:'输入页码，按回车快速跳转',onInput:(e)=>(t.gop=e.target.value),onKeyup:(e)=>{if(e.key==='Enter'){_fun.go(t.gop)}},}),h('a',{onClick:()=>_fun.go(t.gop),},'跳转'),]:'',]):''},}