const Storage=localStorage,session=sessionStorage;Array.prototype.remove=function(val){var index=this.indexOf(val);if(index>-1){this.splice(index,1)}};const{h,Fragment,withDirectives,vModelSelect,reactive,ref,customRef,toRef,toRefs,watch,computed,onMounted,onUpdated,onBeforeUpdate,nextTick,}=Vue;const _obj=reactive({s_:{},m_:{},footer:{},isLoading:!1});const _fun={loginm:{check(i){let t=_obj.f[i];let err=_fun.loginm.err;t.verify(i,t);if(!t.val){if(t.offcheck){t.status=!0}else{err(i,'')}}else{if(t.len&&t.len.min&&t.val.length<t.len.min){err(i,'长度不得少于'+t.len.min+'个字符')}else if(t.len&&t.len.max&&t.val.length>t.len.max){err(i,'长度不得多于'+t.len.max+'个字符')}else{if(t.req!=null)t.req.abort();t.req=new AbortController();if(!t.err&&t.api){_BT.req.url(t.api).signal(t.req).middlewares([delayMiddleware(t,800)]).formUrl({[t.name]:t.val,}).post().text((r)=>{if(r=='0'){err(i,'已被注册')}else{t.status=!0}}).catch((e)=>{if(e.message&&!e.message.includes('abort')){err(i,'网络错误')}})}
if(!t.err&&!t.api){t.status=!0}}
t.show=t.err?!0:!1}},err(i,e){let t=_obj.f[i];t.err=e;t.status=!1;t.show=!0},checks(){for(let i=0;i<_obj.f.length;i++){if(_obj.f[i].status==!1)_fun.loginm.check(i);}
_obj.tipsback=''},submit(){const obj={};const t=_obj;let button='.login-box>button';_fun.loginm.checks();if(_obj.f.every((fn)=>fn.status)==!1)return;obj.cookietime=t.cookietime?10506240:'';t.f.map((k)=>{obj[k.name]=k.val});if(t.nocaptcha){_fun.loginm.post(button,obj)}else{$('#captcha-submit-info').captcha({src:'/res/captcha/2',success_tip:'验证成功！',callback(){_fun.loginm.post(button,obj)},})}},post(button,obj){const t=_obj;t.isLoading=!0;$(button).attr('disabled','disabled');_BT.req.url(t.api).formUrl($.extend({},{code:$('#captcha-submit-info').val(),siteid:1,dosubmit:1,},obj)).post().json(_fun.handleSuccess).catch(_fun.handleError)},},formatDate(timestamp){if(!timestamp)return'';const ts=String(timestamp).length<=10?timestamp*1000:timestamp;const date=new Date(ts);const now=new Date();const today=new Date(now.getFullYear(),now.getMonth(),now.getDate());const yesterday=new Date(today);yesterday.setDate(yesterday.getDate()-1);const timestampDate=new Date(date.getFullYear(),date.getMonth(),date.getDate());const hour=String(date.getHours()).padStart(2,'0');const minute=String(date.getMinutes()).padStart(2,'0');const timeStr=`${hour}:${minute}`;if(timestampDate.getTime()===today.getTime()){return `今天 ${timeStr}`}else if(timestampDate.getTime()===yesterday.getTime()){return `昨天 ${timeStr}`}else{const year=date.getFullYear();const month=String(date.getMonth()+1).padStart(2,'0');const day=String(date.getDate()).padStart(2,'0');return `${year}-${month}-${day} ${timeStr}`}},open(a,e){let s=a.search(window.location.hostname)==-1&&(a.search('https://')!=-1||a.search('http://')!=-1)?!0:!1;window.open(a,'',s?'noopener=yes,noreferrer=yes':'')},href(a,e){let s=a.search(window.location.hostname)==-1&&(a.search('https://')!=-1||a.search('http://')!=-1)?!0:!1;window.location.href=a},show(a){_obj.s_[a]=!0},hide(a){_obj.s_[a]=!1},menu(a){_obj.m_[a]=!_obj.m_[a]},thide(e){let target=$(e.target);if(_obj.m_[e.data.k]==!0&&target.closest(e.data.a).length!=0)return;_obj.m_[e.data.k]=!1},img(a,b,c=!1){return _BT.imghost+'/img/'+a+'/'+b+(c?'_i':'')},hoverWithDelay(f,e,delay=500){let on=null;let off=null;let fn=()=>{if(e)_fun.show(e);f()};return{onmouseenter:()=>{if(off){clearTimeout(off);off=null}else{on=setTimeout(fn,delay)}},onmouseleave:()=>{if(on){clearTimeout(on);on=null}else{off=setTimeout(()=>_fun.hide(e),delay)}},}},msg(msg,time=3000){let el=$('#msg');el.remove();let nemsg=$('<div>').attr('id','msg').text(msg).appendTo('body').addClass('msgup');setTimeout(function(){nemsg.remove()},time)},tips(e,msg,time=2000,position='top'){var tip=$('<div class="t-tips '+position+'">'+msg+'</div>');$('body').append(tip);var el=e.offset();var top,left;switch(position){case 'top':top=el.top-tip.outerHeight();left=el.left+(e.outerWidth()-tip.outerWidth())/2;break;case 'bottom':top=el.top+e.outerHeight();left=el.left+(e.outerWidth()-tip.outerWidth())/2;break;case 'left':top=el.top+(e.outerHeight()-tip.outerHeight())/2;left=el.left-tip.outerWidth();break;case 'right':top=el.top+(e.outerHeight()-tip.outerHeight())/2;left=el.left+e.outerWidth();break;default:top=el.top-tip.outerHeight();left=el.left+(e.outerWidth()-tip.outerWidth())/2}
tip.css({top:top,left:left});setTimeout(function(){tip.remove()},time)},EPexpand(list){const res=[];for(const item of list){if(!Array.isArray(item)){res.push(item);continue}
const[pf,num]=item;const[pre,suf]=pf;if(Array.isArray(num)){for(let i=num[0];i<=num[1];i++){res.push(`${pre}${i}${suf}`)}}else{res.push(`${pre}${num}${suf}`)}}
return res},};const emitt=mitt();let PLazyLoad=new LazyLoad({cancel_on_exit:!1,unobserve_entered:!0,});if(!Object.fromEntries){Object.fromEntries=function(s){let obj={};for(let e of s){obj[e[0]]=e[1]}
return obj}}
Object.uReactive=function(target,source,value=undefined){if(!target||typeof target!=='object'){console.warn('不是对象');return target}
Object.assign(target,source);Object.keys(target).forEach((key)=>{if(!(key in source)){target[key]=value}});return target};function getUrlParams(){return Object.fromEntries(new URLSearchParams(window.location.search))}
var adset=Storage.adset;var lyad=Storage.lyad;if(lyad!=1){var mlyst=[{i:590,n:'粉红的午后'},{i:692,n:'荷尔蒙'},{i:478,n:'美女与水手服'},{i:781,n:'无眠身懒'},{i:910,n:'回眸一笑'},{i:582,n:'真空牛仔裤'},{i:639,n:'疯狂的jk学妹'},{i:662,n:'无暇'},{i:529,n:'妹妹来了'},{i:517,n:'美人醉秋波'},{i:418,n:'天台上的丝语'},{i:807,n:'笼子里的鸟儿'},{i:550,n:'汹涌而出'},{i:474,n:'瑜伽女孩'},{i:599,n:'等你好久'},{i:509,n:'独家记忆'},{i:506,n:'秋色满房'},{i:441,n:'少女心事'},{i:462,n:'一丝温柔'},{i:799,n:'身体密码'},{i:774,n:'盛开'},{i:890,n:'如花'},{i:584,n:'蕾丝兔女郎'},{i:761,n:'霓虹甜心'},{i:872,n:'婀娜多姿'},{i:960,n:'活力四射'},];mlyst.sort(()=>{return Math.random()-0.5})}
const _BT={imghost:'https://s.tutu.pm',imgc:{x:128,xx:256,xxx:384,},img(a,b){return _BT.imghost+'/img/'+a+'/'+b+'.webp'},title:{a:'GYING',b:'观影',set(v='',u=!0){document.title=(v||'')+(u?' | ':'')+_BT.title.b+' '+_BT.title.a},},HTML:{},req:wretch().options({credentials:'same-origin',mode:'cors'}),contact(){let a='@',l='loser996'+a+'pm.me',m='邮箱：<a href="mailto:'+l+'">'+l+'</a><br>除非有很重要的事情才需要邮件联系，其它请直接<a href="/gbook">留言</a>';return m},enuri(v){let str=encodeURIComponent(v).replace(/\%/g,'_');str=str.replace(/\'/g,'&lsquo;');str=str.replace(/\"/g,'&ldquo;');return str},historys:{maxItems:50,storageKey:'play_historys',add(data){if(!data.id||!data.dir||data.s===undefined){return!1}
let historys=this.get();const existIndex=historys.findIndex((item)=>item.id===data.id&&item.dir===data.dir);if(existIndex>-1){historys.splice(existIndex,1)}
historys.unshift({id:data.id,dir:data.dir,s:data.s,time:data.time||0,to:data.to||0,title:data.title||'',ep:data.ep||'',pid:data.pid||'',date:Date.now(),});if(historys.length>this.maxItems){historys=historys.slice(0,this.maxItems)}
Storage.setItem(this.storageKey,JSON.stringify(historys));return!0},get(){try{const data=Storage.getItem(this.storageKey);return data?JSON.parse(data):[]}catch(e){console.warn('播放历史记录读取失败',e);return[]}},getById(id,dir){const historys=this.get();return historys.find((item)=>item.id===id&&item.dir===dir)||null},remove(id,dir){let historys=this.get();const newHistorys=historys.filter((item)=>!(item.id===id&&item.dir===dir));if(newHistorys.length!==historys.length){Storage.setItem(this.storageKey,JSON.stringify(newHistorys));return!0}
return!1},clear(){Storage.removeItem(this.storageKey);return!0},},ftext:'GYING',url:{list:['gying.org','gying.si','gyg.la','gyg.si'],html:[h('b',['本站域名已被运营商DNS劫持，请将DNS设置为',h('a',{href:'https://www.dnspod.cn/products/publicdns',target:'_blank',rel:'noreferrer'},'腾讯DNS'),' 或 ',h('a',{href:'https://www.alidns.com/',target:'_blank',rel:'noreferrer'},'阿里DNS'),h('br'),'推荐浏览器: ',[{h:'//www.google.cn/chrome/',n:'Chrome'},{h:'//www.mozilla.org/zh-CN/firefox/',n:'Firefox'},{h:'//www.xbext.com/',n:'X'},{h:'//viayoo.com/zh-cn/',n:'Via'},{h:'//lemurbrowser.com/',n:'狐猴'},].map((n)=>{return h('a',{href:n.h,target:'_blank'},n.n+' ')}),h('br'),'发邮件到',h('a',{href:'mailto:dizhi777@pm.me'},'dizhi777@pm.me'),'，自动回复地址',h('br'),h('br'),'地址发布页：',h('br'),h('a',{href:'//www.gying.page',target:'_blank'},'https://www.gying.page'),h('br'),h('br'),'部分地址：',]),'<br>禁止在贴吧、论坛、微博等讨论本网站',],},NN:'',msg(msg,time=3000){let el=$('#msg');el.remove();let nemsg=$('<div>').attr('id','msg').text(msg).appendTo('body').addClass('msgup');setTimeout(function(){nemsg.remove()},time)},tips(e,msg,time=2000,position='top'){var tip=$('<div class="t-tips '+position+'">'+msg+'</div>');$('body').append(tip);var el=e.offset();var top,left;switch(position){case 'top':top=el.top-tip.outerHeight();left=el.left+(e.outerWidth()-tip.outerWidth())/2;break;case 'bottom':top=el.top+e.outerHeight();left=el.left+(e.outerWidth()-tip.outerWidth())/2;break;case 'left':top=el.top+(e.outerHeight()-tip.outerHeight())/2;left=el.left-tip.outerWidth();break;case 'right':top=el.top+(e.outerHeight()-tip.outerHeight())/2;left=el.left+e.outerWidth();break;default:top=el.top-tip.outerHeight();left=el.left+(e.outerWidth()-tip.outerWidth())/2}
tip.css({top:top,left:left});setTimeout(function(){tip.remove()},time)},decrypt(r,k){let s=atob(r);let d='';for(let i=0;i<s.length;i++){d+=String.fromCharCode(s.charCodeAt(i)^k.charCodeAt(i%k.length))}
return d},};function resetTabs(obj){$(obj).parent().parent().next('.down-list').find('li').hide();$(obj).parent().parent().find('li').removeClass('on')}
function tonewurl(){let a=['.li','.one'];let v=a[Math.round(Math.random()*(a.length-1))];window.location.href='https://www.'+v+location.pathname;return!1}
function xtip_open(){}
function s_f(e,d){wts();window.location.href='/'+d+'/'+e.value}
function wts(){$('#wto').html($('#season').find('option:checked').text());$('#season').width($('#wts').width())}
function to(){return!1}
function copytext(a){(a.c1='复制成功'),(a.c2='复制失败');a.copy=function(x){if(XEClipboard.copy(x)){return a.c1}else{if(navigator.clipboard&&window.isSecureContext){navigator.clipboard.writeText(x);return a.c1}else{return a.c2}}};if(typeof a.fun==='function'){return a.fun()}
function a1(x){_BT.tips($(a.trigger),x)}
function a2(x){_BT.msg(x)}
if(a.domian=='w'){if(a.msg){a2(a.copy(a.text))}else{a1(a.copy(a.text))}}else{a2(a.copy(a.text))}}
const delayMiddleware=(t,delay)=>{return(next)=>(url,opts)=>{if(t.timeout){clearTimeout(t.timeout)}
return new Promise((res)=>{t.timeout=setTimeout(()=>res(next(url,opts)),delay)})}};if(typeof AbortController==='undefined'){AbortController=function(){this.abort=function(){}}}
const _Loading={setup(){return()=>_obj.isLoading?h('div',{class:'loadingx',},h('div',{class:'loadingx-spinner'})):''},};const _Aimg={props:['src','alt','w','h','sizes'],setup(props){const t=props;let mysrc=t.src;if(t.sizes){if(_BT.PC){if(typeof t.sizes==='object'){mysrc=_BT.PC.width?`${t.src}/${t.sizes.max}`:t.sizes.min?`${t.src}/${t.sizes.min}`:t.src}else{mysrc=_BT.PC.width?t.src:`${t.src}/${t.sizes}`}}}
return()=>h('picture',[h('source',{'data-srcset':mysrc+'.avif',type:'image/avif',}),h('img',{class:'lazy','data-src':mysrc+'.webp',alt:t.alt,width:t.w,height:t.h,}),])},};const _Popup={props:['w','title'],setup(ps,{expose,slots}){const t=reactive({visible:!1,});const fun_={setpp(v){t.visible=v},};expose(fun_);return()=>t.visible?h('div',{class:'popup-wrapper',},[h('div',{class:'popup-overlay',onClick:()=>fun_.setpp(!1),}),h('div',{class:'popup-content',style:{width:ps.w},},[h('div',{class:'popup-header',},[h('h4',ps.title),h('div',{class:'popup-close',onClick:()=>fun_.setpp(!1),},'✖'),]),slots.body?h('div',{class:'popup-body',},slots.body()):null,slots.footer?h('div',{class:'popup-footer',},slots.footer()):null,]),]):null},};function Ping(url,timeout=6000){const start=Date.now();return Promise.race([new Promise((resolve,reject)=>{const img=new Image();img.onload=()=>{console.log(Date.now()-start);resolve(Date.now()-start)};img.onerror=(e)=>{reject(e)};img.src=url+'/ping/?'+start}),new Promise((_,reject)=>setTimeout(()=>reject(new Error('timeout')),timeout)),])}
const _InputField={props:['modelValue','type','name','placeholder','showEmailSuggest','rightButton','disabled'],setup(props,{emit,attrs,slots}){const focused=ref(!1);const suggestions=ref([]);const showPassword=ref(!1);const isSelecting=ref(!1);const domains=['gmail.com','qq.com','163.com','hotmail.com','outlook.com','yahoo.com','126.com','icloud.com','me.com','sina.com','sohu.com','yeah.net','foxmail.com','pm.me','proton.me','protonmail.com',];watch(()=>props.modelValue,(val)=>{if(props.showEmailSuggest){updateSuggestions(val)}});const handleInput=(e)=>{emit('update:modelValue',e.target.value);if(props.showEmailSuggest){updateSuggestions(e.target.value)}};const updateSuggestions=(val)=>{if(!val){suggestions.value=[];return}
const atIndex=val.indexOf('@');if(atIndex===-1&&props.name==='email'&&val.length>0){suggestions.value=domains.map((d)=>`${val}@${d}`);return}
if(atIndex!==-1&&atIndex===val.lastIndexOf('@')){const prefix=val.slice(0,atIndex);const domainPart=val.slice(atIndex+1);const isExactMatch=domains.some((d)=>d===domainPart);if(isExactMatch){suggestions.value=[];return}
const matchedDomains=domains.filter((d)=>d.startsWith(domainPart));if(matchedDomains.length>0){suggestions.value=matchedDomains.map((d)=>`${prefix}@${d}`)}else{suggestions.value=[]}}else{suggestions.value=[]}};const selectSuggestion=(suggestion)=>{emit('update:modelValue',suggestion);suggestions.value=[];focused.value=!1};const handleBlur=()=>{if(isSelecting.value){return}
focused.value=!1};const handleFocus=(e)=>{focused.value=!0;if(props.showEmailSuggest){updateSuggestions(props.modelValue)}
if(attrs.onFocus){attrs.onFocus(e)}};const togglePassword=()=>{showPassword.value=!showPassword.value};const inputType=computed(()=>{if(props.type==='password'){return showPassword.value?'text':'password'}
return props.type||'text'});const containerClass=computed(()=>{let cls='';if(props.type==='password'){cls+='pwd-wrap'}
if(props.rightButton){cls+=' input'}
return cls});return()=>[h('div',{class:containerClass.value,style:{position:'relative'},},[h('input',{value:props.modelValue,onInput:handleInput,onFocus:handleFocus,onBlur:handleBlur,name:props.name,placeholder:props.placeholder,type:inputType.value,disabled:props.disabled,}),props.type==='password'?h('span',{class:'pwd-toggle',onClick:togglePassword,},showPassword.value?'隐藏':'显示'):null,props.rightButton?slots.rightButton&&slots.rightButton():null,props.showEmailSuggest&&suggestions.value.length>0&&focused.value?h('div',{class:'email-dropdown',onMousedown:()=>{isSelecting.value=!0},onMouseup:()=>{isSelecting.value=!1},},suggestions.value.map((suggestion)=>h('div',{class:'email-option',onClick:()=>selectSuggestion(suggestion),},suggestion))):null,]),]},};const _PlaylistEdit={props:['playlist','onSaved'],setup(props,{expose}){const t=reactive({visible:!1,items:[],dragging:null,dragOver:null,touchStartY:0,touchCurrentItem:null,isTouchMoving:!1,longPressTimer:null,isLongPressed:!1,});const fun_={setpp(v){t.visible=v},};expose(fun_);const saveOrder=()=>{const orderNames=t.items.map((item)=>item.name);Storage.playlistOrder=JSON.stringify(orderNames);if(typeof props.onSaved==='function'){props.onSaved()}
fun_.setpp(!1)};const resetToDefault=()=>{delete Storage.playlistOrder;_fun.preparePlaylistEdit(props.playlist);if(typeof props.onSaved==='function'){props.onSaved()}};const handleDragStart=(index)=>{t.dragging=index};const handleDragOver=(e,index)=>{e.preventDefault();t.dragOver=index};const handleDrop=(e)=>{e.preventDefault();if(t.dragging!==null&&t.dragOver!==null&&t.dragging!==t.dragOver){const item=t.items[t.dragging];t.items.splice(t.dragging,1);t.items.splice(t.dragOver,0,item);t.dragging=null;t.dragOver=null}};const handleTouchStart=(e,index)=>{t.touchStartY=e.touches[0].clientY;t.touchCurrentItem=index;t.isTouchMoving=!1;t.isLongPressed=!1;t.longPressTimer=setTimeout(()=>{t.isLongPressed=!0;t.dragging=index;if(navigator.vibrate){navigator.vibrate(50)}},500)};const handleTouchMove=(e,index)=>{if(!t.isLongPressed){clearTimeout(t.longPressTimer);return}
e.preventDefault();if(t.touchCurrentItem===null)return;t.isTouchMoving=!0;const touchY=e.touches[0].clientY;const deltaY=touchY-t.touchStartY;const elements=document.querySelectorAll('.playlist-edit-item');const touchElement=document.elementFromPoint(e.touches[0].clientX,e.touches[0].clientY);for(let i=0;i<elements.length;i++){if(elements[i].contains(touchElement)){t.dragOver=i;break}}};const handleTouchEnd=(e)=>{clearTimeout(t.longPressTimer);if(t.isLongPressed&&t.isTouchMoving&&t.touchCurrentItem!==null&&t.dragOver!==null&&t.touchCurrentItem!==t.dragOver){const item=t.items[t.touchCurrentItem];t.items.splice(t.touchCurrentItem,1);t.items.splice(t.dragOver,0,item)}
t.touchStartY=0;t.touchCurrentItem=null;t.isTouchMoving=!1;t.dragging=null;t.dragOver=null;t.isLongPressed=!1};const moveUp=(index)=>{if(index>0){const temp=t.items[index];t.items[index]=t.items[index-1];t.items[index-1]=temp}};const moveDown=(index)=>{if(index<t.items.length-1){const temp=t.items[index];t.items[index]=t.items[index+1];t.items[index+1]=temp}};_fun.preparePlaylistEdit=(playlist)=>{const savedOrderNames=Storage.playlistOrder?JSON.parse(Storage.playlistOrder):null;const groupedItems={};playlist.forEach((item,index)=>{let baseName=item.t;baseName=baseName.replace(/\([^)]*\)/g,'').trim();baseName=baseName.replace(/[国粤日英韩泰法德西俄意葡泰](语|版|配音)$/g,'').trim();if(!groupedItems[baseName]){groupedItems[baseName]={name:baseName,fullNames:[item.t],sourceIndices:[index],originalIndex:index,}}else{groupedItems[baseName].sourceIndices.push(index);groupedItems[baseName].fullNames.push(item.t)}});let items=Object.values(groupedItems);if(savedOrderNames&&savedOrderNames.length>0){const sortedItems=[];savedOrderNames.forEach((name)=>{const foundIndex=items.findIndex((item)=>item.name===name);if(foundIndex!==-1){sortedItems.push(items[foundIndex]);items.splice(foundIndex,1)}});t.items=[...sortedItems,...items]}else{t.items=items.sort((a,b)=>a.originalIndex-b.originalIndex)}};return()=>t.visible?h('div',{class:'popup-wrapper',},[h('div',{class:'popup-overlay',onClick:()=>fun_.setpp(!1),}),h('div',{class:'popup-content',},[h('div',{class:'popup-header',},[h('h4','编辑线路顺序'),h('div',{class:'popup-close',onClick:()=>fun_.setpp(!1),},'✖'),]),h('div',{class:'popup-body',},[h('div',{class:'playlist-edit-tip'},['可以拖动调整顺序 ',h('button',{class:'reset-btn',onClick:resetToDefault,},'重置默认顺序'),]),h('div',{class:'playlist-edit-container'},h('div',{class:'playlist-edit-grid'},t.items.map((item,index)=>h('div',{key:index,class:{'playlist-edit-item':!0,dragging:index===t.dragging,'drag-over':index===t.dragOver,},draggable:!0,onDragstart:()=>handleDragStart(index),onDragover:(e)=>handleDragOver(e,index),onDrop:handleDrop,onDragend:()=>{t.dragging=null;t.dragOver=null},onTouchstart:(e)=>handleTouchStart(e,index),onTouchmove:(e)=>handleTouchMove(e,index),onTouchend:handleTouchEnd,onTouchcancel:handleTouchEnd,},[h('div',{class:'playlist-item-info'},[h('span',{class:'playlist-item-name'},`${index + 1}. ${item.name}`),]),h('div',{class:'playlist-item-actions'},[h('button',{class:{disabled:index===0},onClick:()=>moveUp(index),disabled:index===0,},'上移'),h('button',{class:{disabled:index===t.items.length-1},onClick:()=>moveDown(index),disabled:index===t.items.length-1,},'下移'),]),])))),]),h('div',{class:'popup-footer',},[h('button',{style:'background:var(--sbg);color:var(--color)',onClick:()=>fun_.setpp(!1),},'取消'),h('button',{onClick:saveOrder},'保存'),]),]),]):null},};!(function(){var o=[].constructor||Array;function t(t){return t.Array==o}
if('object'!=typeof globalThis||!t(globalThis)){var l='object'==typeof window&&t(window)?window:'object'==typeof global&&t(global)?global:'object'==typeof self&&t(self)?self:'object'==typeof this&&t(this)?this:Function('return this')();l.globalThis=l}})();_BT.PC={HTML($name,$mount='body'){const HTML={header:{setup(){return()=>[h(_Header)]},},footer:{setup(){return()=>[h(_Footer)]},},};let startTime=performance.now();const app=Vue.createApp(typeof HTML[$name]==='object'?HTML[$name]:_BT.HTML[$name]);app.mount($mount);let endTime=performance.now();let vueTime=Math.round(endTime-startTime);_obj.footer.vueTime=vueTime;console.log('Vue: '+vueTime+'毫秒');setTimeout(()=>{PLazyLoad.update();let nt=performance.getEntriesByType('navigation')[0];if(nt)_obj.footer.nTime=Math.round(nt.responseEnd-nt.requestStart);},0)},width:window.innerWidth*window.devicePixelRatio>=1750&&window.innerWidth<=1750,};const _Header={setup(){const t=_obj.header;let ad={a:adset==1?'已关闭':'已开启',b:lyad==1?'已关闭':'已开启',};let sh=Storage.s_history?JSON.parse(Storage.s_history):[];t.l=t.l<0?0:t.l;let site={list:_BT.url.list.map((v)=>{return'www.'+v}),check:[],};_BT.NN=t.n;Object.assign(t,{da:Storage.dark?JSON.parse(Storage.dark):!1,ad,ss:[],isFocused:!1,history:Array.isArray(sh)?sh.slice(0,15):[],historys:null,copylink:'',site,ms:{},clock:!1,});const fun_={};const lypp=ref(null);_fun.setad=(v,a)=>{let ad=Storage[a];if(ad==1){Storage[a]=0;t.ad[v]='已开启'}else{lypp.value.setpp(!0);lypp.value.click=()=>{Storage[a]=1;t.ad[v]='已关闭';_BT.msg('✅网页刷新后生效');lypp.value.setpp(!1)}}};_fun.lyad=()=>{_fun.setad('b','lyad')};fun_.sugges=()=>{let q=t.q.trim();if(!q){t.oldq='';t.ss=[];return}
t.isFocused=!0;if(t.req)t.req.abort();if(t.oldq==q&&q)return;t.req=new AbortController();_BT.req.url('/res/s/'+encodeURIComponent(t.q)).signal(t.req).middlewares([delayMiddleware(t,300)]).get().json((json)=>{t.ss=json;t.oldq=q;nextTick(()=>{PLazyLoad.update()})}).catch((e)=>{})};fun_.search=()=>{let q=t.q.trim();if(!q)return;fun_.sss(q);window.location.href='/s/'+(t.t||1)+'-'+(t.p||'')+'--1/'+encodeURIComponent(q)};fun_.sss=(v)=>{v=v.trim();if(!v)return;let h=t.history;h.remove(v);h.unshift(v);t.history=h};watch(()=>t.history,(n,o)=>{Storage.s_history=JSON.stringify(n)},{deep:!0});fun_.at=(a,b)=>{if(!b)return a;b=b.replace(/[.*+?^${}()\-|[\]\\]/g,'\\$&');return a.replace(new RegExp('['+b+']+','gi'),'<strong>$&</strong>').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;').replace(/&lt;(\/?strong)&gt;/g,'<$1>')};_fun.dark=()=>{if(t.da){$('html').addClass('dark')}else{$('html').removeClass('dark')}};watch(()=>t.da,(n)=>{Storage.dark=n;_fun.dark()});_fun.dark();const urlpp=ref(null);fun_.closeurlpp=()=>{Storage.urls=1;urlpp.value.setpp(!1)};fun_.openurlpp=()=>{urlpp.value.setpp(!0)};const copypp=ref(null);_fun.copytext=()=>{copypp.value.setpp(!1);copytext({fun(){_BT.msg(this.copy(t.copylink))},})};fun_.getms=()=>{t.site.list.forEach((v,n)=>{t.site.check[n]=1;for(let i=0;i<1;i++){const delay=i===0?0:2500*i;setTimeout(()=>{Ping('https://'+v).then((time)=>{t.site.check[n]=0;t.ms[v]=t.ms[v]?Math.min(t.ms[v],time):time}).catch((e)=>{t.site.check[n]=0;t.ms[v]=t.ms[v]?Math.min(t.ms[v],9999):9999})},delay)}})};onMounted(async()=>{if(!window.location.pathname.startsWith('/user/')&&!window.location.pathname.startsWith('/py/')){if(adset!=1){$('body').append('<script src="https://pc.stgowan.com/pc/beitou-tf.js" id="beitouid" data="s=9305" async></script>')}}
await nextTick();if(!Storage.getItem('urls'))fun_.openurlpp();emitt.on('copyfun',(v)=>{t.copylink=v;copypp.value.setpp(!0)});$('#hdul li').eq(t.l).addClass('active')});return()=>[h(_Loading),h(_Popup,{ref:urlpp,title:'最新网址',w:'350px'},{body:()=>h('div',[h('div',_BT.url.html[0]),h('div',t.site.list.map((v,i)=>{return[h('a',{href:'https://'+v,target:'_blank',},v),' '+(t.site.check[i]?'检测中...':t.ms[v]?t.ms[v]>99&&t.ms[v]<9999?'✅ '+t.ms[v]+'ms':'❌ 不可访问':''),h('br'),]})),h('br'),h('button',{style:{padding:'7px 14px',cursor:'pointer','border-radius':'4px',},onclick:()=>{t.msc=t.msc||5;if(t.msc<=0)return;const timer=setInterval(()=>{t.msc--;if(t.msc<=0){clearInterval(timer)}},1000);fun_.getms()},},'测试访问'),h('div',{innerHTML:_BT.url.html[1],}),]),footer:()=>h('button',{onClick:()=>fun_.closeurlpp(),},'不再提醒'),}),h(_Popup,{ref:lypp,title:'提示',w:'350px'},{body:()=>h('div','你确定要关闭此广告吗？'),footer:()=>[h('button',{style:'background:var(--sbg);color:var(--color)',onClick:()=>lypp.value.setpp(!1)},'取消'),h('button',{onClick:()=>lypp.value.click()},'确定'),],}),h(_Popup,{ref:copypp,title:'下载链接',w:'600px'},{body:()=>h('div',{class:'magnet-d'},h('textarea',{name:'copy',style:'resize:none;width:100%;height:300px'},t.copylink)),footer:()=>[h('button',{style:'background:var(--sbg);color:var(--color)',onClick:()=>copypp.value.setpp(!1)},'取消'),h('button',{onClick:()=>_fun.copytext(),},'复制'),],}),h('header',h('div',{class:'nav',},[h('div',{class:'logo',},h('a',{href:'/'},_BT.title.b+' '+_BT.title.a)),h('nav',h('ul',{id:'hdul',},[h('li',h('a',{href:'/',},'首页')),[h('li',h('a',{href:'/mv'},'电影')),h('li',h('a',{href:'/tv',},'剧集')),h('li',h('a',{href:'/ac'},'动漫')),h('li',h('a',{href:'/hits/mv'},'热门')),h('li',h('a',{href:'/trailers'},'预告')),h('li',h('a',{href:'/vipplay'},'解析')),h('li',h('a',{onClick:()=>fun_.openurlpp()},'网址')),h('li',{id:'settings',onVnodeMounted:(e)=>{$(document).on('click',{a:e.el,k:'s'},_fun.thide)},},[h('a',{onClick:()=>_fun.menu('s')},'设置'),h('ul',{class:'sub',style:{display:_obj.m_.s?'':'none'},},[h('li',h('a',{onClick:()=>(t.da=!t.da),},['深色主题：',h('i',[t.da?'启':'禁','用'])])),h('li',h('a',{onClick:()=>_fun.setad('a','adset'),},['游戏广告：',h('i',{id:'adset'},t.ad.a)])),h('li',h('a',{onClick:()=>_fun.setad('b','lyad'),},['写真广告：',h('i',{id:'adset'},t.ad.b)])),]),]),],])),h('div',{style:'flex:1;display:flex;justify-content:center'},h('div',{class:'search',onVnodeMounted:(e)=>{$(document).on('click',(el)=>{if(t.isFocused&&!e.el.contains(el.target)&&el.target.id!='srid'){t.isFocused=!1}})},},[h('form',{id:'s_form',onSubmit:(e)=>{e.preventDefault();fun_.search()},},[t.p==4&&h('input',{type:'hidden',name:'p',value:t.p}),t.t?h('input',{type:'hidden',name:'t',value:t.t,}):'',h('input',{type:'search',name:'q',id:'q',class:'word maccms_wd',placeholder:'输入关键词',autocomplete:'off',value:t.q,onInput:(e)=>{t.q=e.target.value;if(!t.clock)fun_.sugges();},onFocus:()=>{fun_.sugges();t.isFocused=!0},onClick:()=>(t.isFocused=!0),onCompositionstart:()=>(t.clock=!0),onCompositionend:()=>{t.clock=!1;fun_.sugges()},}),h('button',{type:'submit',class:'btn-search',},h('span',{class:'icon-search'})),]),!t.q&&t.isFocused&&t.history.length?h('div',{id:'panel',},[h('div',{class:'header',},[h('div',{class:'title',},'搜索历史'),h('div',{class:'clear',onClick:()=>(t.history=[]),},'清空'),]),h('ul',t.history.map((v,n)=>{return h('li',{key:v,},[h('div',{class:'text',onClick:()=>{t.q=v;fun_.search()},},v),h('i',{id:'srid',onClick:()=>t.history.splice(n,1),}),])})),]):'',h('div',{class:'autocomplete-suggestions',style:{display:t.q&&t.ss.length&&t.isFocused?'':'none',},},t.ss.map((v,n)=>{return h('div',{class:'autocomplete-suggestion',key:v.dir+v.id,onClick:()=>{fun_.sss(v.title);_fun.href('/'+v.dir+'/'+v.id)},},[h('div',{style:'width:40px;height:58px',},h(_Aimg,{src:_fun.img(v.dir,v.id)+'/'+_BT.imgc.x,w:40,h:58,})),h('div',{class:'txt',},[h('div',[h('i',{innerHTML:fun_.at(v.title,t.q),}),` (${v.year})`,]),h('p',v.ename),]),h('div',{class:'cate'},v.type),])})),])),h('div',{class:'right hright',},[h('div',{class:'user_menu',},[t.n!=''?h('span',h('a',{href:'/user/favorite',},'收藏')):'',h('span',$.extend({id:'his',},_fun.hoverWithDelay(()=>{if(t.n){_BT.req.url('/res/historys').get().json((r)=>{t.historys=r;nextTick(()=>{PLazyLoad.update()})}).catch((e)=>{})}else{const localHistorys=_BT.historys.get();t.historys=localHistorys.slice(0,20).map((item)=>({id:item.pid,s:item.s,title:item.title,tt:item.ep?' '+item.ep:'',to:item.to,date:item.date,dir:item.dir,bid:item.id,}));nextTick(()=>{PLazyLoad.update()})}},'historys',300)),[h('a',{href:'/user/historys',},'观看历史'),h('ul',{id:'historys',style:{display:_obj.s_.historys?'':'none',},},t.historys==null?h('li',h('center','载入中...')):[h('li',{style:'line-height:normal;text-align:right'},h('a',{title:'清空观看记录',style:'display:inline-block;',onClick:()=>{if(confirm('你确定要删除观看历史吗？')){if(t.n){_BT.req.url('/res/historys/delete').get()}else{_BT.historys.clear()}
t.historys=[]}},},'清空历史')),h('div',{style:'padding:20px 0'},t.historys.length!=0?t.historys.map((v)=>{return h('li',{key:v.id,},h('a',{href:`/py/${v.id}/${v.s}`,style:{display:'flex',padding:'8px 0',borderBottom:'1px solid var(--br2)',},},[h('div',{style:{width:'40px',height:'58px',marginRight:'10px',flexShrink:0,},},h(_Aimg,{src:_fun.img(v.dir,v.bid)+'/'+_BT.imgc.x,w:40,h:58,})),h('div',{style:{flex:'1',display:'flex',flexDirection:'column',justifyContent:'space-between',position:'relative',},},[h('div',{class:'history-delete',onClick:(e)=>{e.preventDefault();e.stopPropagation();if(t.n){_BT.req.url('/res/historys/delone').formUrl({bid:v.bid,dir:v.dir}).post().json((r)=>{if(r.code=='200'){t.historys=t.historys.filter((item)=>item.bid!==v.bid)}})}else{_BT.historys.remove(v.bid,v.dir);t.historys=t.historys.filter((item)=>item.bid!==v.bid)}},title:'删除此记录',},'×'),h('div',{style:{fontWeight:'bold',overflow:'hidden',textOverflow:'ellipsis',whiteSpace:'nowrap',},},v.title),h('div',{style:{display:'flex',justifyContent:'space-between',},},[h('span',v.tt?v.tt.trim():''),h('span','看到 '+v.to+'%'),]),h('div',{style:{fontSize:'12px',color:'var(--colorb)',},},_fun.formatDate(v.date)),]),]))}):h('li',h('center','您的观看历史为空'))),]),]),]),h('div',{id:'user_load',onVnodeMounted:(e)=>{$(document).on('click',{a:e.el,k:'u'},_fun.thide)},},t.n?[h('div',{class:'l3s',onClick:()=>_fun.menu('u'),},h('div',{class:'tx',},h('img',{src:`${_BT.imghost}/tx/${t.u.t}.png`,}))),h('div',{class:'u5d',style:{display:_obj.m_.u?'':'none',},},[h('div',{class:'uj4',},[h('div',{class:'utx',},h('img',{src:`${_BT.imghost}/tx/${t.u.t}.png`,})),h('div',{class:'un0',},[h('b',t.u.n),h('br'),t.u.u]),]),h('ul',{class:'sub',},[h('li',h('a',{href:'/user/favorite',},'我的收藏')),h('li',h('a',{href:'/user/content_list',},'网盘管理')),h('li',h('a',{href:'/user/account',},'账户设置')),h('li',h('a',{href:'/user/logout',},'退出登录')),]),]),]:[h('a',{href:'/user/login',},'登录'),h('i'),h('a',{href:'/user/register',},'注册'),]),]),])),t.u.de?h('div',{style:{'background-color':'#ffa70040',padding:'15px',width:'1200px',margin:'0px auto 15px','border-radius':'4px',},},[`您的账号将于${t.u.de}天后删除 `,h('a',{href:'/user/account/delete'},'前往设置')]):null,]},};const _Footer={setup(){const t=_obj.footer;const ccpp=ref(null);Object.assign(t,{top:!1,vueTime:0,nTime:0,});_fun.scrollTo=()=>{window.scrollTo(0,0)};_fun.scroll=()=>{t.top=window.scrollY>700};onMounted(()=>{window.addEventListener('scroll',_fun.scroll)});return()=>[h(_Popup,{ref:ccpp,title:'联系方式',w:'300px',},{body:()=>h('div',{innerHTML:_BT.contact()}),footer:()=>h('button',{onClick:()=>ccpp.value.setpp(!1)},'关闭'),}),h('footer',[t.top?h('a',{class:'to-top',onClick:()=>{_fun.scrollTo()},},[h('span',{class:'icon-chevron-thin-up'})]):'',h('div',{class:'footer1'},[h('div',_BT.ftext+' · PHP: '+t.t+' 毫秒 · VUE: '+t.vueTime+' 毫秒 · 加载: '+t.nTime+' 毫秒'),h('div',[h('a',{href:'/gbook',},'问题反馈'),' · ',h('a',{onClick:()=>{ccpp.value.setpp(!0)},},'联系方式'),' · ',h('a',{href:'//updown.io/p/ies7x',rel:'noreferrer noopener',target:'_blank',},'服务监控'),]),]),]),]},}